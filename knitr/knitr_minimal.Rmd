---
layout: Rmd
title: knitr markdown test
---
```{r setup, include=FALSE, cache=FALSE}
render_jekyll()
opts_chunk$set(tidy=FALSE, fig.path="images/Rplot-", fig.width=5, fig.height=5)
hook_plot_md_side <- function(x, options){
  if (options$fig.align== 'sidebar') {
    ## sidebar figures
    ## remove terminal space from hook_plot_md 
    paste(sub("\\s+$", "", hook_plot_md(x, options)),
          "{: .sidefig}\n",
          sep = ""
          )
  }else if (options$fig.show == 'asis' ||
            options$fig.num == 1L || 
            options$fig.cur == options$fig.num){
    ## alignment class at end of list of figures: will apply to their paragraph
    if(options$fig.align %in% c('center', 'left', 'right')){
      div_class <- paste("{: .align-", options$fig.align, "}", sep="")
      paste(sub("\\s+$", "", hook_plot_md(x, options)),
          "\n", div_class, "\n", 
          sep = ""
          )
    } else {
      hook_plot_md(x, options)
    }
  } else {
    hook_plot_md(x, options)
  }
}
knit_hooks$set(plot = hook_plot_md_side)
##  put files in place
opts_knit$set(base.dir="..", base.url="/")
```


# Knitr and markdown tests

This is a minimal example of using **knitr** with in HTML pages. I am actually
using markdown here since it is more convenient in GitHub.

First, the input file was named as `knitr-minimal.Rmd`
([source](https://github.com/yihui/knitr/blob/master/inst/examples/knitr-minimal.Rmd)),
and **knitr** will automatically determine the output filename to be
`knitr-minimal.md` (`*.Rmd --> *.md`).

I used the code below to make sure **knitr** writes correct URL's for my images.


Now we write some code chunks in this markdown file:

``` {r}
## a simple calculator
1+1
## boring random numbers
set.seed(123)
rnorm(5)
````

We can also produce plots:

``` {r md-cars-scatter, message=FALSE, fig.align='sidebar'}
library(ggplot2)
qplot(hp, mpg, data=mtcars)+geom_smooth()
````

Testing multiple plot rendering

``` {r cars2, message=FALSE,  fig.align='center'}
qplot(hp, mpg, data=mtcars)+geom_smooth()
qplot(hp, mpg, data=mtcars, color = cyl)+geom_smooth()
````

So no more hesitation on using GitHub and **knitr**! You just write a minimal
amount of code to get beautiful output on the web.